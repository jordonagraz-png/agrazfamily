<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Agraz Family</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;900&family=Inter:wght@300;400;500;600&family=Cormorant+Garamond:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0c1a1a;
--bg2:#111f1f;
--sand:#e8dcc8;
--sand-light:#f5efe3;
--ocean:#1a3a4a;
--ocean-light:#2a5a6a;
--ocean-deep:#0d2630;
--seafoam:#5fb8a0;
--seafoam-light:#7ed4bc;
--warm:#d4a574;
--warm-light:#e8c49a;
--sunset:#d4856a;
--text:#f0ebe3;
--text2:#a0b0b0;
--glass:rgba(12,26,26,0.65);
--glass-light:rgba(255,255,255,0.08);
--border:rgba(95,184,160,0.15);
--glow:0 0 40px rgba(95,184,160,0.1);
}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden}

.ocean-bg{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;overflow:hidden}
.ocean-bg::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(180deg,#0a1520 0%,#0d2630 25%,#1a3a4a 50%,#2a5a6a 70%,#3a7a7a 85%,#5fb8a0 95%,#e8dcc8 100%);opacity:0.7}
.ocean-bg::after{content:'';position:absolute;bottom:0;left:0;width:100%;height:40%;background:linear-gradient(180deg,transparent,rgba(232,220,200,0.05))}

.wave{position:absolute;width:200%;height:200px;bottom:0;left:-50%;opacity:0.03}
.wave1{background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%235fb8a0' d='M0,224L48,208C96,192,192,160,288,165.3C384,171,480,213,576,218.7C672,224,768,192,864,181.3C960,171,1056,181,1152,186.7C1248,192,1344,192,1392,192L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'/%3E%3C/svg%3E") repeat-x;animation:waveMove 12s linear infinite;bottom:0}
.wave2{background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23e8dcc8' d='M0,288L48,272C96,256,192,224,288,213.3C384,203,480,213,576,229.3C672,245,768,267,864,261.3C960,256,1056,224,1152,208C1248,192,1344,192,1392,192L1440,192L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'/%3E%3C/svg%3E") repeat-x;animation:waveMove 18s linear infinite reverse;bottom:-20px}
@keyframes waveMove{0%{transform:translateX(0)}100%{transform:translateX(50%)}}

.floating-light{position:absolute;border-radius:50%;filter:blur(100px);opacity:0.15;animation:floatSlow 20s ease-in-out infinite}
.fl1{width:500px;height:500px;background:var(--seafoam);top:5%;right:10%}
.fl2{width:400px;height:400px;background:var(--warm);top:40%;left:5%;animation-delay:-7s}
.fl3{width:350px;height:350px;background:var(--ocean-light);bottom:15%;right:20%;animation-delay:-14s}
@keyframes floatSlow{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(20px,-20px) scale(1.05)}66%{transform:translate(-15px,15px) scale(0.95)}}

.stars{position:absolute;width:100%;height:60%;top:0}
.star{position:absolute;width:2px;height:2px;background:#fff;border-radius:50%;animation:twinkle 4s ease-in-out infinite}
@keyframes twinkle{0%,100%{opacity:0.2}50%{opacity:0.8}}

#auth-screen .beach-bg{position:absolute;top:0;left:0;width:100%;height:100%;background:url('https://images.unsplash.com/photo-1499793983690-e29da59ef1c2?w=1920&q=85') center/cover no-repeat;z-index:0}
#auth-screen .beach-bg::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,rgba(10,22,30,0.55) 0%,rgba(26,58,74,0.4) 40%,rgba(10,22,30,0.6) 100%)}
#auth-screen .stars{position:absolute;width:100%;height:60%;top:0;z-index:1;pointer-events:none}
#auth-screen{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;display:flex;align-items:center;justify-content:center}
#auth-screen .ocean-bg{position:absolute}

.auth-box{
position:relative;z-index:10;width:440px;max-width:92vw;
background:rgba(12,26,26,0.75);
border:1px solid var(--border);
border-radius:28px;padding:52px 44px;
backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);
box-shadow:0 20px 60px rgba(0,0,0,0.3),0 0 40px rgba(95,184,160,0.08),inset 0 1px 0 rgba(255,255,255,0.05);
}

.auth-logo{text-align:center;margin-bottom:36px}
.auth-logo .logo-icon{font-size:42px;margin-bottom:12px;display:block}
.auth-logo h1{font-family:'Playfair Display',serif;font-size:32px;font-weight:700;color:var(--sand-light);letter-spacing:1px}
.auth-logo p{color:var(--text2);font-size:13px;margin-top:8px;font-family:'Inter',sans-serif;letter-spacing:3px;text-transform:uppercase;font-weight:300}

.tabs{display:flex;margin-bottom:30px;border-radius:14px;background:rgba(255,255,255,0.04);overflow:hidden;border:1px solid rgba(255,255,255,0.05)}
.tab{flex:1;padding:13px;text-align:center;cursor:pointer;font-family:'Inter',sans-serif;font-weight:500;font-size:14px;color:var(--text2);transition:all 0.4s;border:none;background:none;letter-spacing:0.5px}
.tab.active{background:linear-gradient(135deg,var(--seafoam),var(--ocean-light));color:#fff;border-radius:12px;box-shadow:0 4px 15px rgba(95,184,160,0.3)}

.auth-form{display:none}.auth-form.active{display:block}

.fg{margin-bottom:20px}
.fg label{display:block;font-size:11px;color:var(--seafoam-light);margin-bottom:8px;font-family:'Inter',sans-serif;text-transform:uppercase;letter-spacing:2px;font-weight:500}
.fg input{width:100%;padding:15px 18px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);border-radius:14px;color:var(--text);font-family:'Inter',sans-serif;font-size:15px;transition:all 0.3s;outline:none;font-weight:300}
.fg input:focus{border-color:var(--seafoam);box-shadow:0 0 25px rgba(95,184,160,0.12);background:rgba(255,255,255,0.08)}
.fg input::placeholder{color:rgba(255,255,255,0.2)}

.auth-btn{
width:100%;padding:16px;border:none;border-radius:14px;cursor:pointer;
font-family:'Inter',sans-serif;font-size:14px;font-weight:600;
background:linear-gradient(135deg,var(--seafoam),var(--ocean-light));
color:#fff;letter-spacing:1.5px;text-transform:uppercase;
transition:all 0.4s;margin-top:10px;
box-shadow:0 4px 20px rgba(95,184,160,0.25);
}
.auth-btn:hover{transform:translateY(-2px);box-shadow:0 8px 35px rgba(95,184,160,0.35)}

.err{color:var(--sunset);font-size:13px;text-align:center;margin-top:14px;font-family:'Inter',sans-serif;min-height:20px}
.ok{color:var(--seafoam-light);font-size:13px;text-align:center;margin-top:14px;font-family:'Inter',sans-serif}

#main-site{display:none;position:relative;z-index:1}

nav{position:fixed;top:0;left:0;width:100%;z-index:100;background:rgba(12,26,26,0.85);backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px);border-bottom:1px solid var(--border)}
.nav-inner{max-width:1200px;margin:0 auto;padding:0 24px;display:flex;align-items:center;justify-content:space-between;height:72px}
.nav-brand{font-family:'Playfair Display',serif;font-weight:700;font-size:22px;color:var(--sand-light);display:flex;align-items:center;gap:10px}
.nav-brand .brand-icon{font-size:24px}
.nav-links{display:flex;gap:36px;align-items:center}
.nav-links a{color:var(--text2);text-decoration:none;font-weight:400;font-size:14px;transition:all 0.3s;letter-spacing:0.5px;position:relative}
.nav-links a:hover{color:var(--seafoam-light)}
.nav-links a::after{content:'';position:absolute;bottom:-4px;left:0;width:0;height:1px;background:var(--seafoam);transition:width 0.3s}
.nav-links a:hover::after{width:100%}
.nav-user{display:flex;align-items:center;gap:14px}
.nav-user span{font-size:13px;color:var(--seafoam-light);font-family:'Inter',sans-serif;font-weight:300}
.logout-btn{padding:8px 22px;border:1px solid var(--border);border-radius:10px;background:transparent;color:var(--text2);cursor:pointer;font-family:'Inter',sans-serif;font-size:13px;transition:all 0.3s;font-weight:400}
.logout-btn:hover{border-color:var(--sunset);color:var(--sunset)}

.hero{min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:120px 24px 80px;position:relative}
.hero-content{max-width:800px;position:relative;z-index:2}
.hero-icon{font-size:56px;margin-bottom:20px;display:block}
.hero h1{font-family:'Playfair Display',serif;font-size:clamp(38px,6vw,68px);font-weight:700;line-height:1.15;margin-bottom:24px;color:var(--sand-light)}
.hero h1 .gr{background:linear-gradient(135deg,var(--seafoam-light),var(--warm-light));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero p{font-family:'Inter',sans-serif;font-size:17px;color:var(--text2);line-height:1.8;max-width:580px;margin:0 auto 44px;font-weight:300}
.hero-stats{display:flex;justify-content:center;gap:56px;margin-top:52px}
.stat{text-align:center}
.stat-num{font-family:'Playfair Display',serif;font-size:40px;font-weight:700;color:var(--seafoam-light)}
.stat-lbl{font-family:'Inter',sans-serif;font-size:11px;color:var(--text2);text-transform:uppercase;letter-spacing:3px;margin-top:6px;font-weight:400}

.section{padding:100px 24px;max-width:1100px;margin:0 auto}
.section-hdr{text-align:center;margin-bottom:64px}
.section-hdr h2{font-family:'Playfair Display',serif;font-size:36px;font-weight:700;margin-bottom:16px;color:var(--sand-light)}
.section-hdr .accent-line{width:60px;height:2px;background:linear-gradient(90deg,var(--seafoam),var(--warm));margin:16px auto;border-radius:2px}
.section-hdr p{font-family:'Inter',sans-serif;color:var(--text2);font-size:15px;font-weight:300;line-height:1.7}

.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:28px}
.card{
background:var(--glass);border:1px solid var(--border);
border-radius:22px;padding:40px;transition:all 0.5s;
position:relative;overflow:hidden;
backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--seafoam),var(--warm));opacity:0;transition:opacity 0.5s;border-radius:22px 22px 0 0}
.card:hover{transform:translateY(-6px);box-shadow:0 20px 50px rgba(0,0,0,0.2),0 0 30px rgba(95,184,160,0.08)}
.card:hover::before{opacity:1}
.card-icon{font-size:32px;margin-bottom:20px;display:block}
.card h3{font-family:'Playfair Display',serif;font-size:20px;margin-bottom:14px;color:var(--sand-light);font-weight:600}
.card p{font-family:'Inter',sans-serif;color:var(--text2);font-size:14px;line-height:1.8;font-weight:300}

.members{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:24px}
.mc{background:var(--glass);border:1px solid var(--border);border-radius:22px;padding:36px;text-align:center;transition:all 0.5s;backdrop-filter:blur(10px)}
.mc:hover{transform:translateY(-6px);box-shadow:0 15px 40px rgba(0,0,0,0.2)}
.ma{width:80px;height:80px;border-radius:50%;margin:0 auto 18px;background:linear-gradient(135deg,var(--seafoam),var(--ocean-light));display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:26px;font-weight:700;color:#fff;box-shadow:0 4px 20px rgba(95,184,160,0.25)}
.mc h3{font-family:'Playfair Display',serif;font-size:17px;margin-bottom:6px;color:var(--sand-light)}
.mc p{font-family:'Inter',sans-serif;color:var(--text2);font-size:12px;font-weight:300}

.tl{max-width:700px;margin:0 auto;position:relative}
.tl::before{content:'';position:absolute;left:24px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,var(--seafoam),var(--warm),var(--sunset))}
.ti{padding-left:64px;margin-bottom:44px;position:relative}
.td{position:absolute;left:16px;top:4px;width:18px;height:18px;border-radius:50%;background:var(--seafoam);border:3px solid var(--bg);box-shadow:0 0 15px rgba(95,184,160,0.3)}
.ty{font-family:'Inter',sans-serif;font-size:12px;color:var(--seafoam-light);margin-bottom:8px;letter-spacing:2px;text-transform:uppercase;font-weight:500}
.ti h3{font-family:'Playfair Display',serif;font-size:22px;font-weight:600;margin-bottom:8px;color:var(--sand-light)}
.ti p{font-family:'Inter',sans-serif;color:var(--text2);font-size:14px;line-height:1.7;font-weight:300}

footer{border-top:1px solid var(--border);padding:48px 24px;text-align:center;font-family:'Inter',sans-serif;color:var(--text2);font-size:13px;font-weight:300;position:relative;z-index:2}
footer .fb{font-family:'Playfair Display',serif;font-size:18px;color:var(--sand-light);margin-bottom:8px;font-weight:600}
footer .footer-tagline{font-size:12px;color:var(--text2);letter-spacing:2px;margin-bottom:16px}

@media(max-width:768px){.nav-links{display:none}.hero-stats{flex-direction:column;gap:28px}.auth-box{padding:36px 28px}.cards{grid-template-columns:1fr}}

::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:rgba(95,184,160,0.2);border-radius:3px}::-webkit-scrollbar-thumb:hover{background:rgba(95,184,160,0.35)}

.fi{opacity:0;transform:translateY(24px);transition:all 0.7s cubic-bezier(0.25,0.46,0.45,0.94)}.fi.v{opacity:1;transform:translateY(0)}

.tile-page{display:none;padding:100px 24px 60px;max-width:1100px;margin:0 auto;min-height:100vh;position:relative;z-index:2}
.tile-page.active{display:block}
.tile-back{display:inline-flex;align-items:center;gap:8px;color:var(--seafoam-light);font-family:'Inter',sans-serif;font-size:14px;cursor:pointer;background:none;border:none;padding:8px 0;margin-bottom:24px;transition:color 0.3s}
.tile-back:hover{color:var(--seafoam)}
.tile-page h2{font-family:'Playfair Display',serif;font-size:32px;color:var(--sand-light);margin-bottom:32px}

.upload-area{border:2px dashed var(--border);border-radius:18px;padding:32px;text-align:center;cursor:pointer;transition:all 0.3s;margin-bottom:20px;background:rgba(255,255,255,0.03)}
.upload-area:hover{border-color:var(--seafoam);background:rgba(95,184,160,0.05)}
.upload-area input{display:none}
.upload-area p{color:var(--text2);font-family:'Inter',sans-serif;font-size:14px}

.gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px}
.gallery-item{border-radius:16px;overflow:hidden;background:var(--glass);border:1px solid var(--border);transition:transform 0.3s}
.gallery-item:hover{transform:translateY(-4px)}
.gallery-item img{width:100%;aspect-ratio:1;object-fit:cover;display:block}
.gallery-item .gi-info{padding:12px 16px}
.gallery-item .gi-caption{color:var(--text);font-family:'Inter',sans-serif;font-size:13px;margin-bottom:4px}
.gallery-item .gi-meta{color:var(--text2);font-family:'Inter',sans-serif;font-size:11px}
.gallery-item .gi-del{background:none;border:none;color:var(--sunset);font-size:11px;cursor:pointer;padding:4px 0;font-family:'Inter',sans-serif}

.cal-nav{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}
.cal-nav h3{font-family:'Playfair Display',serif;font-size:22px;color:var(--sand-light)}
.cal-nav button{background:rgba(255,255,255,0.06);border:1px solid var(--border);color:var(--text);border-radius:10px;padding:8px 16px;cursor:pointer;font-family:'Inter',sans-serif;transition:all 0.3s}
.cal-nav button:hover{border-color:var(--seafoam);color:var(--seafoam-light)}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px;margin-bottom:8px}
.cal-day-hdr{text-align:center;font-family:'Inter',sans-serif;font-size:11px;color:var(--text2);padding:8px 0;text-transform:uppercase;letter-spacing:1px}
.cal-day{min-height:70px;border-radius:10px;padding:8px;background:rgba(255,255,255,0.03);border:1px solid transparent;cursor:pointer;transition:all 0.3s}
.cal-day:hover{border-color:var(--border);background:rgba(255,255,255,0.06)}
.cal-day.today{border-color:var(--seafoam);background:rgba(95,184,160,0.08)}
.cal-day.other{opacity:0.3}
.cal-day .cd-num{font-family:'Inter',sans-serif;font-size:13px;color:var(--text);margin-bottom:4px}
.cal-day .cd-event{font-family:'Inter',sans-serif;font-size:10px;color:var(--seafoam-light);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

.event-form{background:var(--glass);border:1px solid var(--border);border-radius:18px;padding:28px;margin-bottom:32px;backdrop-filter:blur(10px)}
.event-form h3{font-family:'Playfair Display',serif;font-size:18px;color:var(--sand-light);margin-bottom:16px}
.ef-row{display:flex;gap:12px;margin-bottom:12px;flex-wrap:wrap}
.ef-row input,.ef-row textarea{flex:1;min-width:200px;padding:12px 14px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);border-radius:10px;color:var(--text);font-family:'Inter',sans-serif;font-size:14px;outline:none;transition:border-color 0.3s}
.ef-row input:focus,.ef-row textarea:focus{border-color:var(--seafoam)}
.ef-row textarea{resize:vertical;min-height:60px}
.ef-btn{padding:10px 24px;border:none;border-radius:10px;background:linear-gradient(135deg,var(--seafoam),var(--ocean-light));color:#fff;font-family:'Inter',sans-serif;font-size:13px;font-weight:600;cursor:pointer;transition:all 0.3s;letter-spacing:0.5px}
.ef-btn:hover{transform:translateY(-2px);box-shadow:0 4px 15px rgba(95,184,160,0.3)}

.events-list{display:flex;flex-direction:column;gap:12px}
.event-item{background:var(--glass);border:1px solid var(--border);border-radius:14px;padding:18px 22px;display:flex;align-items:flex-start;gap:16px;backdrop-filter:blur(10px)}
.event-date-badge{min-width:50px;text-align:center;background:rgba(95,184,160,0.12);border-radius:10px;padding:8px}
.event-date-badge .edb-month{font-family:'Inter',sans-serif;font-size:10px;color:var(--seafoam-light);text-transform:uppercase;letter-spacing:1px}
.event-date-badge .edb-day{font-family:'Playfair Display',serif;font-size:22px;color:var(--sand-light)}
.event-details h4{font-family:'Inter',sans-serif;font-size:15px;color:var(--text);margin-bottom:4px}
.event-details p{font-family:'Inter',sans-serif;font-size:13px;color:var(--text2);line-height:1.5}
.event-details .ed-by{font-size:11px;color:var(--text2);margin-top:6px}
.event-item .ei-del{background:none;border:none;color:var(--sunset);font-size:11px;cursor:pointer;padding:4px;margin-left:auto;font-family:'Inter',sans-serif}

.post-form{display:flex;gap:12px;margin-bottom:32px;align-items:flex-start}
.post-form textarea{flex:1;padding:14px 16px;background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.1);border-radius:14px;color:var(--text);font-family:'Inter',sans-serif;font-size:14px;resize:vertical;min-height:80px;outline:none;transition:border-color 0.3s}
.post-form textarea:focus{border-color:var(--seafoam)}
.post-form .ef-btn{padding:14px 24px;border-radius:14px;white-space:nowrap;align-self:flex-end}

.posts-feed{display:flex;flex-direction:column;gap:16px}
.post-card{background:var(--glass);border:1px solid var(--border);border-radius:18px;padding:24px;backdrop-filter:blur(10px)}
.post-card .pc-header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.post-card .pc-avatar{width:36px;height:36px;border-radius:50%;background:linear-gradient(135deg,var(--seafoam),var(--ocean-light));display:flex;align-items:center;justify-content:center;font-family:'Playfair Display',serif;font-size:14px;color:#fff;font-weight:700}
.post-card .pc-name{font-family:'Inter',sans-serif;font-size:14px;color:var(--text);font-weight:500}
.post-card .pc-time{font-family:'Inter',sans-serif;font-size:11px;color:var(--text2)}
.post-card .pc-text{font-family:'Inter',sans-serif;font-size:14px;color:var(--text);line-height:1.7;white-space:pre-wrap}
.post-card .pc-del{background:none;border:none;color:var(--sunset);font-size:11px;cursor:pointer;padding:4px 0;margin-top:8px;font-family:'Inter',sans-serif}

.tile-loading{text-align:center;padding:40px;color:var(--text2);font-family:'Inter',sans-serif}
.card.clickable{cursor:pointer}

@media(max-width:768px){.gallery{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}.cal-day{min-height:50px;padding:4px}.cal-day .cd-num{font-size:11px}.ef-row{flex-direction:column}.post-form{flex-direction:column}}
</style>
</head>
<body>

<div id="auth-screen">
<div class="beach-bg"></div>
<div class="stars" id="auth-stars"></div>

<div class="auth-box">
<div class="auth-logo">
<span class="logo-icon">&#127958;</span>
<h1>Agraz Family</h1>

</div>

<div class="tabs">
<button class="tab active" onclick="switchTab('login')">Sign In</button>
<button class="tab" onclick="switchTab('register')">Join Family</button>
</div>

<form id="login-form" class="auth-form active" onsubmit="handleLogin(event)">
<div class="fg"><label>Email</label><input type="email" id="le" placeholder="your@email.com" required></div>
<div class="fg"><label>Password</label><input type="password" id="lp" placeholder="Enter your password" required></div>
<button type="submit" class="auth-btn">Come On In</button>
<div id="lerr" class="err"></div>
</form>

<form id="register-form" class="auth-form" onsubmit="handleRegister(event)">
<div class="fg"><label>Full Name</label><input type="text" id="rn" placeholder="Your full name" required></div>
<div class="fg"><label>Email</label><input type="email" id="re" placeholder="your@email.com" required></div>
<div class="fg"><label>Password</label><input type="password" id="rp" placeholder="Create a password" required minlength="6"></div>
<div class="fg"><label>Family Code</label><input type="text" id="rc" placeholder="Enter family invite code" required></div>
<button type="submit" class="auth-btn">Join the Family</button>
<div id="rerr" class="err"></div>
<div id="rok" class="ok"></div>
</form>
</div>
</div>

<div id="main-site">
<div id="main-content">
<div class="ocean-bg">
<div class="floating-light fl1"></div>
<div class="floating-light fl2"></div>
<div class="floating-light fl3"></div>
<div class="stars" id="main-stars"></div>
<div class="wave wave1"></div>
<div class="wave wave2"></div>
</div>

<nav>
<div class="nav-inner">
<div class="nav-brand"><span class="brand-icon">&#127958;</span> Agraz Family</div>
<div class="nav-links">
<a href="#home">Home</a>
<a href="#about">Our Space</a>
<a href="#members">Family</a>
<a href="#milestones">Memories</a>
</div>
<div class="nav-user">
<span id="ud"></span>
<button class="logout-btn" onclick="handleLogout()">Logout</button>
</div>
</div>
</nav>

<section class="hero" id="home">
<div class="hero-content fi">
<span class="hero-icon">&#127754;</span>
<h1>Welcome to<br><span class="gr">The Agraz Family</span></h1>
<p>A private family space where the ocean breeze meets warm memories. Stay connected, share moments, and feel at home no matter the distance.</p>
<div class="hero-stats">
<div class="stat"><div class="stat-num" id="mc">0</div><div class="stat-lbl">Family Members</div></div>
<div class="stat"><div class="stat-num">&infin;</div><div class="stat-lbl">Memories</div></div>
<div class="stat"><div class="stat-num">1</div><div class="stat-lbl">Family</div></div>
</div>
</div>
</section>

<section class="section" id="about">
<div class="section-hdr fi">
<h2>Our Family Hub</h2>
<div class="accent-line"></div>
<p>Everything that makes the Agraz family special, all in one place</p>
</div>
<div class="cards">
<div class="card fi clickable" onclick="openTile('memories')">
<span class="card-icon">&#128247;</span>
<h3>Shared Memories</h3>
<p>A place to upload and relive our favorite photos and videos from family gatherings, holidays, and everyday moments.</p>
</div>
<div class="card fi clickable" onclick="openTile('events')">
<span class="card-icon">&#127749;</span>
<h3>Family Events</h3>
<p>Never miss a birthday, anniversary, or reunion. Our shared calendar keeps everyone in sync.</p>
</div>
<div class="card fi clickable" onclick="openTile('updates')">
<span class="card-icon">&#128155;</span>
<h3>Stay Connected</h3>
<p>Share updates, stories, recipes, and traditions. Keep our family bonds strong across any distance.</p>
</div>
<a href="https://www.ancestry.com/family-tree/tree/191301314/family?cfpid=182483266401" target="_blank" rel="noopener" class="card fi" style="text-decoration:none;color:inherit">
<span class="card-icon">&#127795;</span>
<h3>Family Tree</h3>
<p>Explore our roots and see how our family connects through generations on Ancestry.</p>
</a>
</div>
</section>

<section class="section" id="members">
<div class="section-hdr fi">
<h2>Our Family</h2>
<div class="accent-line"></div>
<p>The amazing people who make up our family</p>
</div>
<div class="members" id="mg"></div>
</section>

<section class="section" id="milestones">
<div class="section-hdr fi">
<h2>Family Milestones</h2>
<div class="accent-line"></div>
<p>The moments that define our journey together</p>
</div>
<div class="tl fi">
<div class="ti"><div class="td"></div><div class="ty">2024</div><h3>Family Website Launched</h3><p>We created our private digital space to bring the family closer together.</p></div>
<div class="ti"><div class="td"></div><div class="ty">2025</div><h3>Growing Together</h3><p>New beginnings, new memories, and a stronger bond than ever before.</p></div>
<div class="ti"><div class="td"></div><div class="ty">Forever</div><h3>Our Legacy Continues</h3><p>Building a lasting legacy for generations of the Agraz family to come.</p></div>
</div>
</section>

<footer>
<div class="fb">&#127958; Agraz Family</div>
<div class="footer-tagline">Where the ocean meets home</div>
<p>&copy; 2025 Agraz Family Portal &mdash; Private &amp; Secure</p>
</footer>
</div>

<div id="page-memories" class="tile-page">
<button class="tile-back" onclick="closeTile()">&#8592; Back to Home</button>
<h2>&#128247; Shared Memories</h2>
<div class="upload-area" onclick="document.getElementById('mem-file').click()">
<input type="file" id="mem-file" accept="image/*" multiple>
<p>&#128206; Click here to upload photos</p>
</div>
<div id="mem-status" style="display:none;margin-bottom:20px">
<p id="mem-count" style="color:var(--seafoam-light);font-family:Inter,sans-serif;font-size:13px;margin-bottom:8px"></p>
<div class="ef-row"><input type="text" id="mem-caption" placeholder="Add a caption (optional)"></div>
<button class="ef-btn" id="mem-submit-btn" onclick="submitMemory()">Upload</button>
</div>
<div id="memories-grid" class="gallery"></div>
<div id="mem-loading" class="tile-loading" style="display:none">Loading memories...</div>
</div>

<div id="page-events" class="tile-page">
<button class="tile-back" onclick="closeTile()">&#8592; Back to Home</button>
<h2>&#127749; Family Events</h2>
<div class="event-form">
<h3>Add an Event</h3>
<div class="ef-row"><input type="text" id="ev-title" placeholder="Event title"><input type="date" id="ev-date"></div>
<div class="ef-row"><textarea id="ev-desc" placeholder="Description (optional)"></textarea></div>
<button class="ef-btn" onclick="addEvent()">Add Event</button>
</div>
<div class="cal-nav"><button onclick="prevMonth()">&#8592;</button><h3 id="cal-title"></h3><button onclick="nextMonth()">&#8594;</button></div>
<div class="cal-grid"><div class="cal-day-hdr">Sun</div><div class="cal-day-hdr">Mon</div><div class="cal-day-hdr">Tue</div><div class="cal-day-hdr">Wed</div><div class="cal-day-hdr">Thu</div><div class="cal-day-hdr">Fri</div><div class="cal-day-hdr">Sat</div></div>
<div class="cal-grid" id="cal-cells"></div>
<h3 style="font-family:'Playfair Display',serif;color:var(--sand-light);margin:32px 0 16px">Upcoming Events</h3>
<div id="events-list" class="events-list"></div>
<div id="ev-loading" class="tile-loading" style="display:none">Loading events...</div>
</div>

<div id="page-updates" class="tile-page">
<button class="tile-back" onclick="closeTile()">&#8592; Back to Home</button>
<h2>&#128155; Stay Connected</h2>
<div class="post-form">
<textarea id="post-text" placeholder="Share something with the family..."></textarea>
<button class="ef-btn" onclick="addPost()">Post</button>
</div>
<div id="posts-feed" class="posts-feed"></div>
<div id="post-loading" class="tile-loading" style="display:none">Loading posts...</div>
</div>

</div>

<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
<script>
function createStars(id,n){var c=document.getElementById(id);if(!c)return;for(var i=0;i<n;i++){var s=document.createElement('div');s.className='star';s.style.left=Math.random()*100+'%';s.style.top=Math.random()*100+'%';s.style.animationDelay=Math.random()*4+'s';s.style.animationDuration=(3+Math.random()*3)+'s';c.appendChild(s);}}
createStars('auth-stars',40);createStars('main-stars',40);

firebase.initializeApp({apiKey:"AIzaSyDXmJkA5_ZJf0tIj983JfbY9WgNy_gzV8o",authDomain:"agrazfamily.firebaseapp.com",projectId:"agrazfamily",storageBucket:"agrazfamily.firebasestorage.app",messagingSenderId:"50763592692",appId:"1:50763592692:web:d8e1cad550d2b1ff1b3fa1"});
var auth=firebase.auth();
var db=firebase.firestore();
var FC='agraz2025';
var registering=false;

function esc(s){var d=document.createElement('div');d.textContent=s;return d.innerHTML;}

function switchTab(t){document.querySelectorAll('.tab').forEach(function(x){x.classList.remove('active');});document.querySelectorAll('.auth-form').forEach(function(x){x.classList.remove('active');});if(t==='login'){document.querySelectorAll('.tab')[0].classList.add('active');document.getElementById('login-form').classList.add('active');}else{document.querySelectorAll('.tab')[1].classList.add('active');document.getElementById('register-form').classList.add('active');}document.getElementById('lerr').textContent='';document.getElementById('rerr').textContent='';document.getElementById('rok').textContent='';}

function handleRegister(e){
e.preventDefault();
var n=document.getElementById('rn').value.trim(),em=document.getElementById('re').value.trim().toLowerCase(),pw=document.getElementById('rp').value,co=document.getElementById('rc').value.trim();
document.getElementById('rerr').textContent='';document.getElementById('rok').textContent='';
if(co!==FC){document.getElementById('rerr').textContent='Invalid family code. Ask a family member for the code.';return;}
registering=true;
auth.createUserWithEmailAndPassword(em,pw).then(function(cred){
return cred.user.updateProfile({displayName:n}).then(function(){
return db.collection('users').doc(cred.user.uid).set({name:n,email:em,joinedDate:new Date().toISOString()});
});
}).then(function(){
registering=false;
document.getElementById('rok').textContent='Welcome to the family!';
document.getElementById('register-form').reset();
setTimeout(function(){showMain(auth.currentUser);},1000);
}).catch(function(err){
registering=false;
var msg='Registration failed.';
if(err.code==='auth/email-already-in-use')msg='An account with this email already exists.';
else if(err.code==='auth/weak-password')msg='Password should be at least 6 characters.';
else if(err.code==='auth/invalid-email')msg='Invalid email address.';
document.getElementById('rerr').textContent=msg;
});
}

function handleLogin(e){
e.preventDefault();
var em=document.getElementById('le').value.trim().toLowerCase(),pw=document.getElementById('lp').value;
document.getElementById('lerr').textContent='';
auth.signInWithEmailAndPassword(em,pw).catch(function(){
document.getElementById('lerr').textContent='Invalid email or password.';
});
}

function handleLogout(){auth.signOut();}

function showMain(u){document.getElementById('auth-screen').style.display='none';document.getElementById('main-site').style.display='block';document.getElementById('ud').textContent=u.displayName||u.email;renderM();initAnim();}

function renderM(){
db.collection('users').get().then(function(snap){
var g=document.getElementById('mg');
document.getElementById('mc').textContent=snap.size;
var html='';
snap.forEach(function(doc){
var u=doc.data();
var ini=esc(u.name).split(' ').map(function(w){return w[0];}).join('').toUpperCase();
html+='<div class="mc fi"><div class="ma">'+ini+'</div><h3>'+esc(u.name)+'</h3><p>Joined '+new Date(u.joinedDate).toLocaleDateString()+'</p></div>';
});
g.innerHTML=html;
initAnim();
});
}

function initAnim(){var o=new IntersectionObserver(function(entries){entries.forEach(function(entry){if(entry.isIntersecting)entry.target.classList.add('v');});},{threshold:0.1});document.querySelectorAll('.fi').forEach(function(el){o.observe(el);});}

document.querySelectorAll('a[href^="#"]').forEach(function(a){a.addEventListener('click',function(e){e.preventDefault();document.querySelector(a.getAttribute('href')).scrollIntoView({behavior:'smooth'});});});

auth.onAuthStateChanged(function(user){
if(registering)return;
if(user){showMain(user);}
else{document.getElementById('auth-screen').style.display='flex';document.getElementById('main-site').style.display='none';}
});

// Tile navigation
var currentTile=null;
function openTile(name){
currentTile=name;
document.getElementById('main-content').style.display='none';
document.getElementById('page-'+name).style.display='block';
window.scrollTo(0,0);
if(name==='memories')loadMemories();
else if(name==='events')loadEvents();
else if(name==='updates')loadPosts();
}
function closeTile(){
if(currentTile)document.getElementById('page-'+currentTile).style.display='none';
document.getElementById('main-content').style.display='block';
currentTile=null;
}

// === Shared Memories ===
var pendingFiles=[];
document.getElementById('mem-file').addEventListener('change',function(){
var files=this.files;
if(files.length>0){pendingFiles=Array.from(files);document.getElementById('mem-count').textContent=files.length+' photo(s) selected';document.getElementById('mem-status').style.display='block';}
});
function compressImg(file,maxW,q){return new Promise(function(res){
var r=new FileReader();r.onload=function(e){
if(!file.type.startsWith('image/')){res(null);return;}
var img=new Image();img.onload=function(){
var c=document.createElement('canvas');var ratio=Math.min(maxW/img.width,1);
c.width=img.width*ratio;c.height=img.height*ratio;
c.getContext('2d').drawImage(img,0,0,c.width,c.height);
res(c.toDataURL('image/jpeg',q));
};img.src=e.target.result;
};r.readAsDataURL(file);
});}
function submitMemory(){
var caption=document.getElementById('mem-caption').value.trim();
var user=auth.currentUser;if(!user||pendingFiles.length===0)return;
var btn=document.getElementById('mem-submit-btn');btn.textContent='Uploading...';btn.disabled=true;
var promises=pendingFiles.map(function(f){return compressImg(f,1200,0.7).then(function(data){
if(!data)return null;
return db.collection('memories').add({imageData:data,caption:caption,uploadedBy:user.displayName||user.email,createdAt:new Date().toISOString()});
});});
Promise.all(promises).then(function(){
pendingFiles=[];document.getElementById('mem-caption').value='';document.getElementById('mem-status').style.display='none';document.getElementById('mem-file').value='';
btn.textContent='Upload';btn.disabled=false;loadMemories();
}).catch(function(){btn.textContent='Upload';btn.disabled=false;alert('Upload failed. Image may be too large.');});
}
function loadMemories(){
document.getElementById('mem-loading').style.display='block';document.getElementById('memories-grid').innerHTML='';
db.collection('memories').orderBy('createdAt','desc').get().then(function(snap){
document.getElementById('mem-loading').style.display='none';var html='';
snap.forEach(function(doc){var m=doc.data();var id=doc.id;
html+='<div class="gallery-item"><img src="'+m.imageData+'" alt="memory" loading="lazy"><div class="gi-info">';
if(m.caption)html+='<div class="gi-caption">'+esc(m.caption)+'</div>';
html+='<div class="gi-meta">'+esc(m.uploadedBy)+' &middot; '+new Date(m.createdAt).toLocaleDateString()+'</div>';
html+='<button class="gi-del" onclick="delMemory(\''+id+'\')">Delete</button></div></div>';
});
document.getElementById('memories-grid').innerHTML=html||'<p style="color:var(--text2);font-family:Inter,sans-serif;text-align:center;grid-column:1/-1;padding:40px">No memories yet. Upload the first photo!</p>';
});
}
function delMemory(id){if(confirm('Delete this memory?'))db.collection('memories').doc(id).delete().then(loadMemories);}

// === Family Events ===
var calMonth=new Date().getMonth(),calYear=new Date().getFullYear(),calEvents=[];
function loadEvents(){
document.getElementById('ev-loading').style.display='block';
db.collection('events').orderBy('date','asc').get().then(function(snap){
document.getElementById('ev-loading').style.display='none';
calEvents=[];var listHtml='';var today=new Date().toISOString().split('T')[0];
var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
snap.forEach(function(doc){var e=doc.data();e.id=doc.id;calEvents.push(e);
if(e.date>=today){var d=new Date(e.date+'T12:00:00');
listHtml+='<div class="event-item"><div class="event-date-badge"><div class="edb-month">'+months[d.getMonth()]+'</div><div class="edb-day">'+d.getDate()+'</div></div><div class="event-details"><h4>'+esc(e.title)+'</h4>';
if(e.description)listHtml+='<p>'+esc(e.description)+'</p>';
listHtml+='<div class="ed-by">Added by '+esc(e.createdBy)+'</div></div><button class="ei-del" onclick="delEvent(\''+e.id+'\')">Delete</button></div>';}
});
document.getElementById('events-list').innerHTML=listHtml||'<p style="color:var(--text2);font-family:Inter,sans-serif">No upcoming events. Add one above!</p>';
renderCal();
});
}
function addEvent(){
var t=document.getElementById('ev-title').value.trim();var d=document.getElementById('ev-date').value;
var desc=document.getElementById('ev-desc').value.trim();var user=auth.currentUser;
if(!t||!d||!user){alert('Please enter a title and date.');return;}
db.collection('events').add({title:t,date:d,description:desc,createdBy:user.displayName||user.email,createdAt:new Date().toISOString()}).then(function(){
document.getElementById('ev-title').value='';document.getElementById('ev-date').value='';document.getElementById('ev-desc').value='';loadEvents();});
}
function delEvent(id){if(confirm('Delete this event?'))db.collection('events').doc(id).delete().then(loadEvents);}
function prevMonth(){calMonth--;if(calMonth<0){calMonth=11;calYear--;}renderCal();}
function nextMonth(){calMonth++;if(calMonth>11){calMonth=0;calYear++;}renderCal();}
function renderCal(){
var mNames=['January','February','March','April','May','June','July','August','September','October','November','December'];
document.getElementById('cal-title').textContent=mNames[calMonth]+' '+calYear;
var daysInMonth=new Date(calYear,calMonth+1,0).getDate();var startDay=new Date(calYear,calMonth,1).getDay();
var grid=document.getElementById('cal-cells');grid.innerHTML='';var today=new Date();
var prevLast=new Date(calYear,calMonth,0).getDate();
for(var i=startDay-1;i>=0;i--){var c=document.createElement('div');c.className='cal-day other';c.innerHTML='<div class="cd-num">'+(prevLast-i)+'</div>';grid.appendChild(c);}
for(var day=1;day<=daysInMonth;day++){
var c=document.createElement('div');var ds=calYear+'-'+String(calMonth+1).padStart(2,'0')+'-'+String(day).padStart(2,'0');
var isToday=today.getFullYear()===calYear&&today.getMonth()===calMonth&&today.getDate()===day;
c.className='cal-day'+(isToday?' today':'');
var evs=calEvents.filter(function(e){return e.date===ds;});var dots='';
evs.forEach(function(e){dots+='<div class="cd-event">'+esc(e.title)+'</div>';});
c.innerHTML='<div class="cd-num">'+day+'</div>'+dots;
c.onclick=(function(d){return function(){document.getElementById('ev-date').value=d;window.scrollTo({top:0,behavior:'smooth'});};})(ds);
grid.appendChild(c);
}
var total=startDay+daysInMonth;var rem=7-(total%7);
if(rem<7){for(var i=1;i<=rem;i++){var c=document.createElement('div');c.className='cal-day other';c.innerHTML='<div class="cd-num">'+i+'</div>';grid.appendChild(c);}}
}

// === Stay Connected ===
function loadPosts(){
document.getElementById('post-loading').style.display='block';document.getElementById('posts-feed').innerHTML='';
db.collection('updates').orderBy('createdAt','desc').get().then(function(snap){
document.getElementById('post-loading').style.display='none';var html='';
snap.forEach(function(doc){var p=doc.data();var id=doc.id;
var ini=esc(p.author).split(' ').map(function(w){return w[0];}).join('').toUpperCase();
var ts=timeSince(new Date(p.createdAt));
html+='<div class="post-card"><div class="pc-header"><div class="pc-avatar">'+ini+'</div><div><div class="pc-name">'+esc(p.author)+'</div><div class="pc-time">'+ts+'</div></div></div><div class="pc-text">'+esc(p.text)+'</div><button class="pc-del" onclick="delPost(\''+id+'\')">Delete</button></div>';
});
document.getElementById('posts-feed').innerHTML=html||'<p style="color:var(--text2);font-family:Inter,sans-serif;text-align:center;padding:40px">No posts yet. Be the first to share!</p>';
});
}
function addPost(){
var t=document.getElementById('post-text').value.trim();var user=auth.currentUser;
if(!t||!user)return;
db.collection('updates').add({text:t,author:user.displayName||user.email,createdAt:new Date().toISOString()}).then(function(){
document.getElementById('post-text').value='';loadPosts();});
}
function delPost(id){if(confirm('Delete this post?'))db.collection('updates').doc(id).delete().then(loadPosts);}
function timeSince(date){var s=Math.floor((new Date()-date)/1000);
if(s<60)return 'just now';var m=Math.floor(s/60);if(m<60)return m+'m ago';
var h=Math.floor(m/60);if(h<24)return h+'h ago';var d=Math.floor(h/24);
if(d<30)return d+'d ago';return date.toLocaleDateString();}
</script>
</body>
</html>
